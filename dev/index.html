<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home Â· PlantSimEngine.jl</title><meta name="title" content="Home Â· PlantSimEngine.jl"/><meta property="og:title" content="Home Â· PlantSimEngine.jl"/><meta property="twitter:title" content="Home Â· PlantSimEngine.jl"/><meta name="description" content="Documentation for PlantSimEngine.jl."/><meta property="og:description" content="Documentation for PlantSimEngine.jl."/><meta property="twitter:description" content="Documentation for PlantSimEngine.jl."/><meta property="og:url" content="https://VirtualPlantLab.github.io/PlantSimEngine.jl/"/><meta property="twitter:url" content="https://VirtualPlantLab.github.io/PlantSimEngine.jl/"/><link rel="canonical" href="https://VirtualPlantLab.github.io/PlantSimEngine.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>PlantSimEngine.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Example-usage"><span>Example usage</span></a></li><li><a class="tocitem" href="#Projects-that-use-PlantSimEngine"><span>Projects that use PlantSimEngine</span></a></li><li><a class="tocitem" href="#Make-it-yours"><span>Make it yours</span></a></li></ul></li><li><a class="tocitem" href="design/">Design</a></li><li><a class="tocitem" href="model_switching/">Model Switching</a></li><li><a class="tocitem" href="reducing_dof/">Reducing DoF</a></li><li><a class="tocitem" href="model_execution/">Execution</a></li><li><a class="tocitem" href="fitting/">Fitting</a></li><li><span class="tocitem">Extending</span><ul><li><a class="tocitem" href="extending/implement_a_process/">Processes</a></li><li><a class="tocitem" href="extending/implement_a_model/">Models</a></li><li><a class="tocitem" href="extending/inputs/">Input types</a></li></ul></li><li><span class="tocitem">Coupling</span><ul><li><input class="collapse-toggle" id="menuitem-8-1" type="checkbox"/><label class="tocitem" for="menuitem-8-1"><span class="docs-label">Users</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="model_coupling/model_coupling_user/">Simple case</a></li><li><a class="tocitem" href="model_coupling/multiscale/">Multi-scale modelling</a></li></ul></li><li><a class="tocitem" href="model_coupling/model_coupling_modeler/">Modelers</a></li></ul></li><li><span class="tocitem">FAQ</span><ul><li><a class="tocitem" href="FAQ/translate_a_model/">I want to use PlantSimEngine for my model</a></li></ul></li><li><a class="tocitem" href="API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/VirtualPlantLab/PlantSimEngine.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ï‚›</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/VirtualPlantLab/PlantSimEngine.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ï„</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="PlantSimEngine"><a class="docs-heading-anchor" href="#PlantSimEngine">PlantSimEngine</a><a id="PlantSimEngine-1"></a><a class="docs-heading-anchor-permalink" href="#PlantSimEngine" title="Permalink"></a></h1><p><a href="https://github.com/VirtualPlantLab/PlantSimEngine.jl/actions/workflows/CI.yml?query=branch%3Amain"><img src="https://github.com/VirtualPlantLab/PlantSimEngine.jl/actions/workflows/CI.yml/badge.svg?branch=main" alt="Build Status"/></a> <a href="https://codecov.io/gh/VirtualPlantLab/PlantSimEngine.jl"><img src="https://codecov.io/gh/VirtualPlantLab/PlantSimEngine.jl/branch/main/graph/badge.svg" alt="Coverage"/></a> <a href="https://github.com/SciML/ColPrac"><img src="https://img.shields.io/badge/ColPrac-Contributor&#39;s%20Guide-blueviolet" alt="ColPrac: Contributor&#39;s Guide on Collaborative Practices for Community Packages"/></a> <a href="https://github.com/JuliaTesting/Aqua.jl"><img src="https://raw.githubusercontent.com/JuliaTesting/Aqua.jl/master/badge.svg" alt="Aqua QA"/></a> <a href="https://zenodo.org/badge/latestdoi/571659510"><img src="https://zenodo.org/badge/571659510.svg" alt="DOI"/></a> <a href="https://joss.theoj.org/papers/137e3e6c2ddc349bec39e06bb04e4e09"><img src="https://joss.theoj.org/papers/137e3e6c2ddc349bec39e06bb04e4e09/status.svg" alt="JOSS"/></a></p><ul><li><a href="#PlantSimEngine">PlantSimEngine</a></li><li class="no-marker"><ul><li><a href="#Overview">Overview</a></li><li><a href="#Installation">Installation</a></li><li><a href="#Example-usage">Example usage</a></li><li class="no-marker"><ul><li><a href="#Simple-example">Simple example</a></li><li><a href="#Model-coupling">Model coupling</a></li><li><a href="#Multiscale-modelling">Multiscale modelling</a></li></ul></li><li><a href="#Projects-that-use-PlantSimEngine">Projects that use PlantSimEngine</a></li><li><a href="#Make-it-yours">Make it yours</a></li></ul></li></ul><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p><code>PlantSimEngine</code> is a comprehensive package for simulating and modelling plants, soil and atmosphere. It provides tools to <strong>prototype, evaluate, test, and deploy</strong> plant/crop models at any scale. At its core, PlantSimEngine is designed with a strong emphasis on performance and efficiency.</p><p>The package defines a framework for declaring processes and implementing associated models for their simulation. </p><p>It focuses on key aspects of simulation and modeling such as: </p><ul><li>Easy definition of new processes, such as light interception, photosynthesis, growth, soil water transfer...</li><li>Fast, interactive prototyping of models, with constraints to help users avoid errors, but sensible defaults to avoid over-complicating the model writing process</li><li>No hassle, the package manages automatically input and output variables, time-steps, objects, soft and hard coupling of models with a dependency graph</li><li>Switch between models without changing any code, with a simple syntax to define the model to use for a given process</li><li>Reduce the degrees of freedom by fixing variables, passing measurements, or using a simpler model for a given process</li><li>ğŸš€(very) fast computation ğŸš€, think of 100th of nanoseconds for one model, two coupled models (see this <a href="https://github.com/VirtualPlantLab/PlantSimEngine.jl/blob/main/examples/benchmark.jl">benchmark script</a>), or the full energy balance of a leaf using <a href="https://github.com/VEZY/PlantBiophysics.jl">PlantBiophysics.jl</a> that uses PlantSimEngine</li><li>Out of the box Sequential, Parallel (Multi-threaded) or Distributed (Multi-Process) computations over objects, time-steps and independent processes (thanks to <a href="https://juliafolds.github.io/FLoops.jl/stable/">Floops.jl</a>)</li><li>Easily scalable, with methods for computing over objects, time-steps and even <a href="https://github.com/VEZY/MultiScaleTreeGraph.jl">Multi-Scale Tree Graphs</a></li><li>Composable, allowing the use of any types as inputs such as <a href="https://github.com/PainterQubits/Unitful.jl">Unitful</a> to propagate units, or <a href="https://github.com/baggepinnen/MonteCarloMeasurements.jl">MonteCarloMeasurements.jl</a> to propagate measurement error</li></ul><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>To install the package, enter the Julia package manager mode by pressing <code>]</code> in the REPL, and execute the following command:</p><pre><code class="language-julia hljs">add PlantSimEngine</code></pre><p>To use the package, execute this command from the Julia REPL:</p><pre><code class="language-julia hljs">using PlantSimEngine</code></pre><h2 id="Example-usage"><a class="docs-heading-anchor" href="#Example-usage">Example usage</a><a id="Example-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Example-usage" title="Permalink"></a></h2><p>The package is designed to be easy to use, and to help users avoid errors when implementing, coupling and simulating models.</p><h3 id="Simple-example"><a class="docs-heading-anchor" href="#Simple-example">Simple example</a><a id="Simple-example-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-example" title="Permalink"></a></h3><p>Here&#39;s a simple example of a model that simulates the growth of a plant, using a simple exponential growth model:</p><pre><code class="language-julia hljs"># ] add PlantSimEngine
using PlantSimEngine

# Import the examples defined in the `Examples` sub-module
using PlantSimEngine.Examples

# Define the model:
model = ModelList(
    ToyLAIModel(),
    status=(TT_cu=1.0:2000.0,), # Pass the cumulated degree-days as input to the model
)

run!(model) # run the model

status(model) # extract the status, i.e. the output of the model</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TimeStepTable{Status{(:TT_cu, :LAI), Tuple{...}(2000 x 2):
<span class="sgr31">â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span>
<span class="sgr31">â”‚</span><span class="sgr1"> Row </span><span class="sgr31">â”‚</span><span class="sgr1">   TT_cu </span><span class="sgr31">â”‚</span><span class="sgr1">        LAI </span><span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>     <span class="sgr31">â”‚</span><span class="sgr90"> Float64 </span><span class="sgr31">â”‚</span><span class="sgr90">    Float64 </span><span class="sgr31">â”‚</span>
<span class="sgr31">â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="sgr31">â”‚</span>   1 <span class="sgr31">â”‚</span>     1.0 <span class="sgr31">â”‚</span> 0.00560052 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   2 <span class="sgr31">â”‚</span>     2.0 <span class="sgr31">â”‚</span> 0.00565163 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   3 <span class="sgr31">â”‚</span>     3.0 <span class="sgr31">â”‚</span> 0.00570321 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   4 <span class="sgr31">â”‚</span>     4.0 <span class="sgr31">â”‚</span> 0.00575526 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   5 <span class="sgr31">â”‚</span>     5.0 <span class="sgr31">â”‚</span> 0.00580778 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   6 <span class="sgr31">â”‚</span>     6.0 <span class="sgr31">â”‚</span> 0.00586078 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   7 <span class="sgr31">â”‚</span>     7.0 <span class="sgr31">â”‚</span> 0.00591426 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   8 <span class="sgr31">â”‚</span>     8.0 <span class="sgr31">â”‚</span> 0.00596823 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   9 <span class="sgr31">â”‚</span>     9.0 <span class="sgr31">â”‚</span> 0.00602269 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  10 <span class="sgr31">â”‚</span>    10.0 <span class="sgr31">â”‚</span> 0.00607765 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  11 <span class="sgr31">â”‚</span>    11.0 <span class="sgr31">â”‚</span> 0.00613311 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  12 <span class="sgr31">â”‚</span>    12.0 <span class="sgr31">â”‚</span> 0.00618908 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  13 <span class="sgr31">â”‚</span>    13.0 <span class="sgr31">â”‚</span> 0.00624556 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  14 <span class="sgr31">â”‚</span>    14.0 <span class="sgr31">â”‚</span> 0.00630255 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  15 <span class="sgr31">â”‚</span>    15.0 <span class="sgr31">â”‚</span> 0.00636006 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  â‹®  <span class="sgr31">â”‚</span>    â‹®    <span class="sgr31">â”‚</span>     â‹®      <span class="sgr31">â”‚</span>
<span class="sgr31">â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span>
<span class="sgr36">             1985 rows omitted</span>
</code></pre><blockquote><p><strong>Note</strong>   The <code>ToyLAIModel</code> is available from the <a href="https://github.com/VirtualPlantLab/PlantSimEngine.jl/tree/main/examples">examples folder</a>, and is a simple exponential growth model. It is used here for the sake of simplicity, but you can use any model you want, as long as it follows <code>PlantSimEngine</code> interface.</p></blockquote><p>Of course you can plot the outputs quite easily:</p><pre><code class="language-julia hljs"># ] add CairoMakie
using CairoMakie

lines(model[:TT_cu], model[:LAI], color=:green, axis=(ylabel=&quot;LAI (mÂ² mâ»Â²)&quot;, xlabel=&quot;Cumulated growing degree days since sowing (Â°C)&quot;))</code></pre><img src="index-dd782c72.png" alt="Example block output"/><h3 id="Model-coupling"><a class="docs-heading-anchor" href="#Model-coupling">Model coupling</a><a id="Model-coupling-1"></a><a class="docs-heading-anchor-permalink" href="#Model-coupling" title="Permalink"></a></h3><p>Model coupling is done automatically by the package, and is based on the dependency graph between the models. To couple models, we just have to add them to the <code>ModelList</code>. For example, let&#39;s couple the <code>ToyLAIModel</code> with a model for light interception based on Beer&#39;s law:</p><pre><code class="language-julia hljs"># ] add PlantSimEngine, DataFrames, CSV
using PlantSimEngine, PlantMeteo, DataFrames, CSV

# Import the examples defined in the `Examples` sub-module
using PlantSimEngine.Examples

# Import the example meteorological data:
meteo_day = CSV.read(joinpath(pkgdir(PlantSimEngine), &quot;examples/meteo_day.csv&quot;), DataFrame, header=18)

# Define the list of models for coupling:
model2 = ModelList(
    ToyLAIModel(),
    Beer(0.6),
    status=(TT_cu=cumsum(meteo_day[:, :TT]),),  # Pass the cumulated degree-days as input to `ToyLAIModel`, this could also be done using another model
)

# Run the simulation:
run!(model2, meteo_day)

status(model2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">TimeStepTable{Status{(:TT_cu, :LAI, :aPPFD)...}(365 x 3):
<span class="sgr31">â•­â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span>
<span class="sgr31">â”‚</span><span class="sgr1"> Row </span><span class="sgr31">â”‚</span><span class="sgr1">    TT_cu </span><span class="sgr31">â”‚</span><span class="sgr1">        LAI </span><span class="sgr31">â”‚</span><span class="sgr1">     aPPFD </span><span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>     <span class="sgr31">â”‚</span><span class="sgr90">  Float64 </span><span class="sgr31">â”‚</span><span class="sgr90">    Float64 </span><span class="sgr31">â”‚</span><span class="sgr90">   Float64 </span><span class="sgr31">â”‚</span>
<span class="sgr31">â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="sgr31">â”‚</span>   1 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0476221 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   2 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0260688 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   3 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0377774 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   4 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0468871 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   5 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0545266 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   6 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0567055 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   7 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0521376 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   8 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0563642 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>   9 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0349947 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  10 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0168016 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  11 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0606171 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  12 <span class="sgr31">â”‚</span>      0.0 <span class="sgr31">â”‚</span> 0.00554988 <span class="sgr31">â”‚</span> 0.0486197 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  13 <span class="sgr31">â”‚</span>   0.5625 <span class="sgr31">â”‚</span> 0.00557831 <span class="sgr31">â”‚</span> 0.0357278 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  14 <span class="sgr31">â”‚</span> 0.945833 <span class="sgr31">â”‚</span> 0.00559777 <span class="sgr31">â”‚</span> 0.0519777 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  15 <span class="sgr31">â”‚</span> 0.979167 <span class="sgr31">â”‚</span> 0.00559946 <span class="sgr31">â”‚</span> 0.0564167 <span class="sgr31">â”‚</span>
<span class="sgr31">â”‚</span>  â‹®  <span class="sgr31">â”‚</span>    â‹®     <span class="sgr31">â”‚</span>     â‹®      <span class="sgr31">â”‚</span>     â‹®     <span class="sgr31">â”‚</span>
<span class="sgr31">â•°â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span>
<span class="sgr36">                           350 rows omitted</span>
</code></pre><p>The <code>ModelList</code> couples the models by automatically computing the dependency graph of the models. The resulting dependency graph is:</p><pre><code class="nohighlight hljs">â•­â”€â”€â”€â”€ Dependency graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  â•­â”€â”€â”€â”€ LAI_Dynamic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚
â”‚  â”‚  â•­â”€â”€â”€â”€ Main model â”€â”€â”€â”€â”€â”€â”€â”€â•®                              â”‚  â”‚
â”‚  â”‚  â”‚  Process: LAI_Dynamic  â”‚                              â”‚  â”‚
â”‚  â”‚  â”‚  Model: ToyLAIModel    â”‚                              â”‚  â”‚
â”‚  â”‚  â”‚  Dep: nothing          â”‚                              â”‚  â”‚
â”‚  â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                              â”‚  â”‚
â”‚  â”‚                  â”‚  â•­â”€â”€â”€â”€ Soft-coupled model â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  Process: light_interception    â”‚  â”‚  â”‚
â”‚  â”‚                  â””â”€â”€â”‚  Model: Beer                    â”‚  â”‚  â”‚
â”‚  â”‚                     â”‚  Dep: (LAI_Dynamic = (:LAI,),)  â”‚  â”‚  â”‚
â”‚  â”‚                     â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚  â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</code></pre><p>We can plot the results by indexing the model with the variable name (e.g. <code>model2[:LAI]</code>):</p><pre><code class="language-julia hljs">using CairoMakie

fig = Figure(resolution=(800, 600))
ax = Axis(fig[1, 1], ylabel=&quot;LAI (mÂ² mâ»Â²)&quot;)
lines!(ax, model2[:TT_cu], model2[:LAI], color=:mediumseagreen)

ax2 = Axis(fig[2, 1], xlabel=&quot;Cumulated growing degree days since sowing (Â°C)&quot;, ylabel=&quot;aPPFD (mol mâ»Â² dâ»Â¹)&quot;)
lines!(ax2, model2[:TT_cu], model2[:aPPFD], color=:firebrick1)

fig</code></pre><img src="index-8744dd31.png" alt="Example block output"/><h3 id="Multiscale-modelling"><a class="docs-heading-anchor" href="#Multiscale-modelling">Multiscale modelling</a><a id="Multiscale-modelling-1"></a><a class="docs-heading-anchor-permalink" href="#Multiscale-modelling" title="Permalink"></a></h3><blockquote><p>See the <a href="#multi-scale-modeling">Multi-scale modeling</a> section for more details.</p></blockquote><p>The package is designed to be easily scalable, and can be used to simulate models at different scales. For example, you can simulate a model at the leaf scale, and then couple it with models at any other scale, <em>e.g.</em> internode, plant, soil, scene scales. Here&#39;s an example of a simple model that simulates plant growth using sub-models operating at different scales:</p><pre><code class="language-julia hljs">mapping = Dict(
    &quot;Scene&quot; =&gt; ToyDegreeDaysCumulModel(),
    &quot;Plant&quot; =&gt; (
        MultiScaleModel(
            model=ToyLAIModel(),
            mapping=[
                :TT_cu =&gt; &quot;Scene&quot;,
            ],
        ),
        Beer(0.6),
        MultiScaleModel(
            model=ToyAssimModel(),
            mapping=[:soil_water_content =&gt; &quot;Soil&quot;],
        ),
        MultiScaleModel(
            model=ToyCAllocationModel(),
            mapping=[
                :carbon_demand =&gt; [&quot;Leaf&quot;, &quot;Internode&quot;],
                :carbon_allocation =&gt; [&quot;Leaf&quot;, &quot;Internode&quot;]
            ],
        ),
        MultiScaleModel(
            model=ToyPlantRmModel(),
            mapping=[:Rm_organs =&gt; [&quot;Leaf&quot; =&gt; :Rm, &quot;Internode&quot; =&gt; :Rm],],
        ),
    ),
    &quot;Internode&quot; =&gt; (
        MultiScaleModel(
            model=ToyCDemandModel(optimal_biomass=10.0, development_duration=200.0),
            mapping=[:TT =&gt; &quot;Scene&quot;,],
        ),
        MultiScaleModel(
            model=ToyInternodeEmergence(TT_emergence=20.0),
            mapping=[:TT_cu =&gt; &quot;Scene&quot;],
        ),
        ToyMaintenanceRespirationModel(1.5, 0.06, 25.0, 0.6, 0.004),
        Status(carbon_biomass=1.0)
    ),
    &quot;Leaf&quot; =&gt; (
        MultiScaleModel(
            model=ToyCDemandModel(optimal_biomass=10.0, development_duration=200.0),
            mapping=[:TT =&gt; &quot;Scene&quot;,],
        ),
        ToyMaintenanceRespirationModel(2.1, 0.06, 25.0, 1.0, 0.025),
        Status(carbon_biomass=1.0)
    ),
    &quot;Soil&quot; =&gt; (
        ToySoilWaterModel(),
    ),
);</code></pre><p>We can import an example plant from the package:</p><pre><code class="language-julia hljs">mtg = import_mtg_example()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">/ 1: Scene
â”œâ”€ / 2: Soil
â””â”€ + 3: Plant
   â””â”€ / 4: Internode
      â”œâ”€ + 5: Leaf
      â””â”€ &lt; 6: Internode
         â””â”€ + 7: Leaf
</code></pre><p>Make a fake meteorological data:</p><pre><code class="language-julia hljs">meteo = Weather(
    [
    Atmosphere(T=20.0, Wind=1.0, Rh=0.65, Ri_PAR_f=300.0),
    Atmosphere(T=25.0, Wind=0.5, Rh=0.8, Ri_PAR_f=500.0)
]
);</code></pre><p>And run the simulation:</p><pre><code class="language-julia hljs">out_vars = Dict(
    &quot;Scene&quot; =&gt; (:TT_cu,),
    &quot;Plant&quot; =&gt; (:carbon_allocation, :carbon_assimilation, :soil_water_content, :aPPFD, :TT_cu, :LAI),
    &quot;Leaf&quot; =&gt; (:carbon_demand, :carbon_allocation),
    &quot;Internode&quot; =&gt; (:carbon_demand, :carbon_allocation),
    &quot;Soil&quot; =&gt; (:soil_water_content,),
)

out = run!(mtg, mapping, meteo, outputs=out_vars, executor=SequentialEx());</code></pre><p>We can then extract the outputs in a <code>DataFrame</code> and sort them:</p><pre><code class="language-julia hljs">using DataFrames
df_out = outputs(out, DataFrame)
sort!(df_out, [:timestep, :node])</code></pre><div><div style = "float: left;"><span>16Ã—10 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">timestep</th><th style = "text-align: left;">organ</th><th style = "text-align: left;">node</th><th style = "text-align: left;">carbon_allocation</th><th style = "text-align: left;">TT_cu</th><th style = "text-align: left;">carbon_assimilation</th><th style = "text-align: left;">aPPFD</th><th style = "text-align: left;">LAI</th><th style = "text-align: left;">soil_water_content</th><th style = "text-align: left;">carbon_demand</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "String" style = "text-align: left;">String</th><th title = "Int64" style = "text-align: left;">Int64</th><th title = "Union{Nothing, Float64}" style = "text-align: left;">Unionâ€¦</th><th title = "Union{Nothing, Float64}" style = "text-align: left;">Unionâ€¦</th><th title = "Union{Nothing, Float64}" style = "text-align: left;">Unionâ€¦</th><th title = "Union{Nothing, Float64}" style = "text-align: left;">Unionâ€¦</th><th title = "Union{Nothing, Float64}" style = "text-align: left;">Unionâ€¦</th><th title = "Union{Nothing, Float64}" style = "text-align: left;">Unionâ€¦</th><th title = "Union{Nothing, Float64}" style = "text-align: left;">Unionâ€¦</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: right;">1</td><td style = "text-align: left;">Scene</td><td style = "text-align: right;">1</td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">10.0</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: right;">1</td><td style = "text-align: left;">Soil</td><td style = "text-align: right;">2</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.5</td><td style = "font-style: italic; text-align: left;"></td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: right;">1</td><td style = "text-align: left;">Plant</td><td style = "text-align: right;">3</td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">10.0</td><td style = "text-align: left;">0.499037</td><td style = "text-align: left;">4.99037</td><td style = "text-align: left;">0.00607765</td><td style = "text-align: left;">0.5</td><td style = "font-style: italic; text-align: left;"></td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: right;">1</td><td style = "text-align: left;">Internode</td><td style = "text-align: right;">4</td><td style = "text-align: left;">0.124183</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.5</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: right;">1</td><td style = "text-align: left;">Leaf</td><td style = "text-align: right;">5</td><td style = "text-align: left;">0.124183</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.5</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: right;">1</td><td style = "text-align: left;">Internode</td><td style = "text-align: right;">6</td><td style = "text-align: left;">0.124183</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.5</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">7</td><td style = "text-align: right;">1</td><td style = "text-align: left;">Leaf</td><td style = "text-align: right;">7</td><td style = "text-align: left;">0.124183</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.5</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">8</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Scene</td><td style = "text-align: right;">1</td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">25.0</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">9</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Soil</td><td style = "text-align: right;">2</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.5</td><td style = "font-style: italic; text-align: left;"></td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">10</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Plant</td><td style = "text-align: right;">3</td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">25.0</td><td style = "text-align: left;">0.952884</td><td style = "text-align: left;">9.52884</td><td style = "text-align: left;">0.00696482</td><td style = "text-align: left;">0.5</td><td style = "font-style: italic; text-align: left;"></td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">11</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Internode</td><td style = "text-align: right;">4</td><td style = "text-align: left;">0.157992</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.75</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">12</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Leaf</td><td style = "text-align: right;">5</td><td style = "text-align: left;">0.157992</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.75</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">13</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Internode</td><td style = "text-align: right;">6</td><td style = "text-align: left;">0.157992</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.75</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">14</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Leaf</td><td style = "text-align: right;">7</td><td style = "text-align: left;">0.157992</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.75</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">15</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Internode</td><td style = "text-align: right;">8</td><td style = "text-align: left;">0.157992</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.75</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">16</td><td style = "text-align: right;">2</td><td style = "text-align: left;">Leaf</td><td style = "text-align: right;">9</td><td style = "text-align: left;">0.157992</td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "font-style: italic; text-align: left;"></td><td style = "text-align: left;">0.75</td></tr></tbody></table></div><p>An example output of a multiscale simulation is shown in the documentation of PlantBiophysics.jl:</p><p><img src="www/image.png" alt="Plant growth simulation"/></p><h2 id="Projects-that-use-PlantSimEngine"><a class="docs-heading-anchor" href="#Projects-that-use-PlantSimEngine">Projects that use PlantSimEngine</a><a id="Projects-that-use-PlantSimEngine-1"></a><a class="docs-heading-anchor-permalink" href="#Projects-that-use-PlantSimEngine" title="Permalink"></a></h2><p>Take a look at these projects that use PlantSimEngine:</p><ul><li><a href="https://github.com/VEZY/PlantBiophysics.jl">PlantBiophysics.jl</a></li><li><a href="https://github.com/PalmStudio/XPalm.jl">XPalm</a></li></ul><h2 id="Make-it-yours"><a class="docs-heading-anchor" href="#Make-it-yours">Make it yours</a><a id="Make-it-yours-1"></a><a class="docs-heading-anchor-permalink" href="#Make-it-yours" title="Permalink"></a></h2><p>The package is developed so anyone can easily implement plant/crop models, use it freely and as you want thanks to its MIT license. </p><p>If you develop such tools and it is not on the list yet, please make a PR or contact me so we can add it! ğŸ˜ƒ</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="design/">Design Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Friday 17 January 2025 09:49">Friday 17 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

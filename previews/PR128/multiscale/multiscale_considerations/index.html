<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Multiscale considerations · PlantSimEngine.jl</title><meta name="title" content="Multiscale considerations · PlantSimEngine.jl"/><meta property="og:title" content="Multiscale considerations · PlantSimEngine.jl"/><meta property="twitter:title" content="Multiscale considerations · PlantSimEngine.jl"/><meta name="description" content="Documentation for PlantSimEngine.jl."/><meta property="og:description" content="Documentation for PlantSimEngine.jl."/><meta property="twitter:description" content="Documentation for PlantSimEngine.jl."/><meta property="og:url" content="https://VirtualPlantLab.github.io/PlantSimEngine.jl/multiscale/multiscale_considerations/"/><meta property="twitter:url" content="https://VirtualPlantLab.github.io/PlantSimEngine.jl/multiscale/multiscale_considerations/"/><link rel="canonical" href="https://VirtualPlantLab.github.io/PlantSimEngine.jl/multiscale/multiscale_considerations/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PlantSimEngine.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../introduction/why_plantsimengine/">Why PlantSimEngine ?</a></li><li><a class="tocitem" href="../../introduction/why_julia/">Why Julia ?</a></li></ul></li><li><span class="tocitem">Prerequisites</span><ul><li><a class="tocitem" href="../../prerequisites/installing_plantsimengine/">Installing and running PlantSimEngine</a></li><li><a class="tocitem" href="../../prerequisites/key_concepts/">Key Concepts</a></li><li><a class="tocitem" href="../../prerequisites/julia_basics/">Julia language basics</a></li></ul></li><li><span class="tocitem">Step by step - Single-scale simulations</span><ul><li><a class="tocitem" href="../../step_by_step/detailed_first_example/">Detailed first simulation</a></li><li><a class="tocitem" href="../../step_by_step/simple_model_coupling/">Coupling</a></li><li><a class="tocitem" href="../../step_by_step/model_switching/">Model Switching</a></li><li><a class="tocitem" href="../../step_by_step/quick_and_dirty_examples/">Quick examples</a></li><li><a class="tocitem" href="../../step_by_step/implement_a_process/">Implementing a process</a></li><li><a class="tocitem" href="../../step_by_step/implement_a_model/">Implementing a model</a></li><li><a class="tocitem" href="../../step_by_step/parallelization/">Parallelization</a></li><li><a class="tocitem" href="../../step_by_step/advanced_coupling/">Advanced coupling and hard dependencies</a></li><li><a class="tocitem" href="../../step_by_step/implement_a_model_additional/">Implementing a model : additional notes</a></li></ul></li><li><a class="tocitem" href="../../model_execution/">Execution</a></li><li><span class="tocitem">Working with data</span><ul><li><a class="tocitem" href="../../working_with_data/reducing_dof/">Reducing DoF</a></li><li><a class="tocitem" href="../../working_with_data/fitting/">Fitting</a></li><li><a class="tocitem" href="../../working_with_data/inputs/">Input types</a></li><li><a class="tocitem" href="../../working_with_data/visualising_outputs/">Visualizing outputs and data</a></li><li><a class="tocitem" href="../../working_with_data/floating_point_accumulation_error/">Floating-point considerations</a></li></ul></li><li><span class="tocitem">Moving to multiscale</span><ul><li class="is-active"><a class="tocitem" href>Multiscale considerations</a><ul class="internal"><li><a class="tocitem" href="#Related-pages"><span>Related pages</span></a></li><li><a class="tocitem" href="#Multi-scale-tree-graphs"><span>Multi-scale tree graphs</span></a></li><li><a class="tocitem" href="#Models-run-once-per-organ-instance,-not-once-per-organ-level"><span>Models run once per organ instance, not once per organ level</span></a></li><li><a class="tocitem" href="#Mappings"><span>Mappings</span></a></li><li><a class="tocitem" href="#The-simulation-operates-on-an-MTG"><span>The simulation operates on an MTG</span></a></li><li><a class="tocitem" href="#The-run!-function&#39;s-signature"><span>The run! function&#39;s signature</span></a></li><li><a class="tocitem" href="#Multi-scale-output-data-structure"><span>Multi-scale output data structure</span></a></li><li><a class="tocitem" href="#Coupling-and-multi-scale-hard-dependencies"><span>Coupling and multi-scale hard dependencies</span></a></li></ul></li><li><a class="tocitem" href="../single_to_multiscale/">Converting a simulation to multi-scale</a></li><li><a class="tocitem" href="../multiscale/">More variable mapping examples</a></li><li><a class="tocitem" href="../multiscale_cyclic/">Handling cyclic dependencies</a></li><li><a class="tocitem" href="../multiscale_coupling/">Multiscale coupling considerations</a></li><li><input class="collapse-toggle" id="menuitem-7-6" type="checkbox"/><label class="tocitem" for="menuitem-7-6"><span class="docs-label">Building a simple plant</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../multiscale_example_1/">A rudimentary plant simulation</a></li><li><a class="tocitem" href="../multiscale_example_2/">Expanding the plant simulation</a></li><li><a class="tocitem" href="../multiscale_example_3/">Fixing bugs in the plant simulation</a></li></ul></li></ul></li><li><span class="tocitem">Troubleshooting and testing</span><ul><li><a class="tocitem" href="../../troubleshooting_and_testing/plantsimengine_and_julia_troubleshooting/">Troubleshooting</a></li><li><a class="tocitem" href="../../troubleshooting_and_testing/downstream_tests/">Automated testing</a></li><li><a class="tocitem" href="../../troubleshooting_and_testing/tips_and_workarounds/">Tips and Workarounds</a></li><li><a class="tocitem" href="../../troubleshooting_and_testing/implicit_contracts/">Implicit contracts</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../API/API_public/">Public API</a></li><li><a class="tocitem" href="../../API/API_examples/">Example models</a></li><li><a class="tocitem" href="../../API/API_private/">Internal API</a></li></ul></li><li><a class="tocitem" href="../../credits/">Credits</a></li><li><a class="tocitem" href="../../documentation_improvement/">Improving our documentation</a></li><li><a class="tocitem" href="../../planned_features/">Planned features</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Moving to multiscale</a></li><li class="is-active"><a href>Multiscale considerations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Multiscale considerations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/VirtualPlantLab/PlantSimEngine.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/VirtualPlantLab/PlantSimEngine.jl/blob/main/docs/src/multiscale/multiscale_considerations.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Multi-scale-considerations"><a class="docs-heading-anchor" href="#Multi-scale-considerations">Multi-scale considerations</a><a id="Multi-scale-considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-scale-considerations" title="Permalink"></a></h1><ul><li><a href="#Multi-scale-considerations">Multi-scale considerations</a></li><li class="no-marker"><ul><li><a href="#Related-pages">Related pages</a></li><li><a href="#Multi-scale-tree-graphs">Multi-scale tree graphs</a></li><li><a href="#Models-run-once-per-organ-instance,-not-once-per-organ-level">Models run once per organ instance, not once per organ level</a></li><li><a href="#Mappings">Mappings</a></li><li><a href="#The-simulation-operates-on-an-MTG">The simulation operates on an MTG</a></li><li><a href="#The-run!-function&#39;s-signature">The run! function&#39;s signature</a></li><li><a href="#Multi-scale-output-data-structure">Multi-scale output data structure</a></li><li><a href="#Coupling-and-multi-scale-hard-dependencies">Coupling and multi-scale hard dependencies</a></li></ul></li></ul><p>This page briefly details the subtle ways in which multi-scale simulations differ from prior single-scale simulations. The next few pages will showcase some of these subtleties with examples.</p><p>Declaring and running a multi-scale simulation follows the same general workflow as the single-scale version, but multi-scale simulations do have some differences : </p><ul><li>a simulation requires a Multi-scale Tree Graph (MTG) to run and operates on that graph</li><li>when running, models are tied to a scale and only access local information</li><li>models can run multiple times per timestep, </li><li>the <code>ModelList</code> is replaced by a slightly more complex model mapping to link models to the scale they will operate at.</li></ul><p>The simulation dependency graph will still be computed automatically and handle most couplings, meaning users don&#39;t need to specify the order of model execution once the extra code to declare the models is written. You will still need to declare hard dependencies, with extra considerations for multi-scale hard dependencies.</p><p>Multi-scale simulations also tend to require more extra ad hoc models to prepare some variables for some models.</p><h2 id="Related-pages"><a class="docs-heading-anchor" href="#Related-pages">Related pages</a><a id="Related-pages-1"></a><a class="docs-heading-anchor-permalink" href="#Related-pages" title="Permalink"></a></h2><p>Other pages in the multiscale section describe :</p><ul><li>How to write a direct conversion of a single-scale ModelList simulation to a multi-scale simulation and add a second scale to it: <a href="../single_to_multiscale/#Converting-a-single-scale-simulation-to-multi-scale">Converting a single-scale simulation to multi-scale</a>, </li><li>A more complex multi-scale version of the single-scale simulation showcasing different variable mappings between scales: <a href="../multiscale/#Multi-scale-variable-mapping">Multi-scale variable mapping</a>, </li><li>A three-part tutorial describing how to build up a combination of models to simulate a growing toy plant: <a href="../multiscale_example_1/#Writing-a-multiscale-simulation">Writing a multiscale simulation</a>,</li><li>Ways to handle situations where a variable ends up causing a cyclic dependency: <a href="../multiscale_cyclic/#Avoiding-cyclic-dependencies">Avoiding cyclic dependencies</a>,</li><li>Multi-scale specific coupling considerations and subtleties:<a href="../multiscale_coupling/#Handling-dependencies-in-a-multiscale-context">Handling dependencies in a multiscale context</a></li></ul><h2 id="Multi-scale-tree-graphs"><a class="docs-heading-anchor" href="#Multi-scale-tree-graphs">Multi-scale tree graphs</a><a id="Multi-scale-tree-graphs-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-scale-tree-graphs" title="Permalink"></a></h2><p>Functional-Structural Plant Models are often about simulating plant growth. A multi-scale simulation is implicitely expected to operate on a plant-like object, represented by a multi-scale tree graph.</p><p>A multi-scale tree graph (MTG) object (see the <a href="../../prerequisites/key_concepts/#Multi-scale-Tree-Graphs">Multi-scale Tree Graphs</a> subsection for a quick description) is therefore required to run a multi-scale simulations. It can be a dummy MTG if the simulation doesn&#39;t actually affect it, but is nevertheless a required argument to the multi-scale <code>run</code> function.</p><p>All the multi-scale examples make use of the companion package <a href="https://github.com/VEZY/MultiScaleTreeGraph.jl">MultiScaleTreeGraph.jl</a>, which we therefore recommend for running your own multi-scale simulations.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Multi-scale Tree Graphs make use of conflicting terminology with PlantSimEngine&#39;s concepts, which is discussed in <a href="../../prerequisites/key_concepts/#Scale/symbol-terminology-ambiguity">Scale/symbol terminology ambiguity</a>. If you are new to the concepts, make sure to read that section and keep note of it.</p></div></div><h2 id="Models-run-once-per-organ-instance,-not-once-per-organ-level"><a class="docs-heading-anchor" href="#Models-run-once-per-organ-instance,-not-once-per-organ-level">Models run once per organ instance, not once per organ level</a><a id="Models-run-once-per-organ-instance,-not-once-per-organ-level-1"></a><a class="docs-heading-anchor-permalink" href="#Models-run-once-per-organ-instance,-not-once-per-organ-level" title="Permalink"></a></h2><p>Some models, like the ones we&#39;ve seen in single-scale simulations, work on a very simple model of a whole plant.</p><p>More fine-grained models can be tied to a specific plant organ. </p><p>For instance, a model computing a leaf&#39;s surface area depending on its age would operate at the &quot;leaf&quot; scale, and be called <strong>for every leaf</strong> at every timestep. On the other hand, a model computing the plant&#39;s total leaf area only needs to be run once per timestep, and can be run at the &quot;Plant&quot; scale.</p><p>This is a major difference between a single-scale simulation and a multi-scale one. By default, any model in a single-scale simulation will only run <strong>once</strong> per timestep. However, in multi-scale, if a plant has several instances of an organ type -say it has a hundred leaves- then any model operating at the &quot;Leaf&quot; scale will by default run one hundred times per timestep, unless it is explicitely controlled by another model (which can happen in hard dependency configurations).</p><h2 id="Mappings"><a class="docs-heading-anchor" href="#Mappings">Mappings</a><a id="Mappings-1"></a><a class="docs-heading-anchor-permalink" href="#Mappings" title="Permalink"></a></h2><p>When users define which models they use, PlantSimEngine cannot determine in advance which scale level they operate at. This is partly because the plant organs in an MTG do not have standardized names, and partly because some plant organs might not be part of the initial MTG, so parsing it isn&#39;t enough to infer what scales are used.</p><p>The user therefore needs to indicate for a simulation&#39;s which models are related to which scale.</p><p>A multi-scale mapping links models to the scale at which they operate, and is implemented as a Julia <code>Dict</code>, tying a scale, such as &quot;Leaf&quot; to models operating at that scale, such as &quot;LeafSurfaceAreaModel&quot;. It is the equivalent of a <code>ModelList</code> in a single-scale simulation.</p><p>Multi-scale models can be similar models to the ones found in earlier sections, or, if they need to make use of variables at other scales, may need to be wrapped as part of a <code>MultiScaleModel</code> object. Many models are not tied to a particular scale, which means those models can be reused at different scales or in single-scale simulations.</p><h2 id="The-simulation-operates-on-an-MTG"><a class="docs-heading-anchor" href="#The-simulation-operates-on-an-MTG">The simulation operates on an MTG</a><a id="The-simulation-operates-on-an-MTG-1"></a><a class="docs-heading-anchor-permalink" href="#The-simulation-operates-on-an-MTG" title="Permalink"></a></h2><p>Unlike in single-scale simulations, which make use of a <code>Status</code> object to store the current state of every variable in a simulation, multi-scale simulations operate on a per-organ basis. </p><p>This means every organ instance has its own <code>Status</code>, with scale-specific attributes.</p><p>This has two <strong>important</strong> consequences in terms of running a simulation :</p><ul><li><p>First, <strong>any scale absent from the MTG will not be run</strong>. If your MTG contains no leaves, then no model operating at the scale &quot;Leaf&quot; will be able to run until a &quot;Leaf&quot; organ is created and a node is added in the MTG. Otherwise, it has no MTG node to operate on. The only exceptions are hard dependency models which can be called from a different scale, since they can be called directly by a model on a node at a different existing scale, even if there is no node at their own scale.</p></li><li><p>Secondly, models only have access to <strong>local</strong> organ information. The <code>status</code> argument in the <code>run!</code> function only contains variables <strong>at the model&#39;s scale</strong>, unless variables from other scales are mapped via a <code>MultiScaleModel</code> wrapping. </p></li></ul><h2 id="The-run!-function&#39;s-signature"><a class="docs-heading-anchor" href="#The-run!-function&#39;s-signature">The run! function&#39;s signature</a><a id="The-run!-function&#39;s-signature-1"></a><a class="docs-heading-anchor-permalink" href="#The-run!-function&#39;s-signature" title="Permalink"></a></h2><p>The <code>run!</code> function differs slightly from its single-scale version. The current structure (excluding a couple of advanced/deprecated kwargs) is the following:</p><pre><code class="language-julia hljs">run!(mtg, mapping, meteo, constants, extra; nsteps, tracked_outputs)</code></pre><p>Instead of a <code>ModelList</code>, it takes an MTG and a mapping. The optional <code>meteo</code> and <code>constants</code> argument are identical to the single-scale version. The <code>extra</code> argument is now reserved and should not be used. A new <code>nsteps</code> keyword argument is available to restrict the simulation to a specified number of steps. </p><h2 id="Multi-scale-output-data-structure"><a class="docs-heading-anchor" href="#Multi-scale-output-data-structure">Multi-scale output data structure</a><a id="Multi-scale-output-data-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-scale-output-data-structure" title="Permalink"></a></h2><p>The output structure, like the mapping, is a Julia <code>Dict</code> structure indexed by scale. In each scale, another <code>Dict</code> maps variables to their values per timestep, per node. This makes the structure a little bulkier and a little more verbose to inspect than in single-scale, but the general usage is similar. Multiscale Tree Graph nodes are also added to the output data, as a <code>:node</code> entry.</p><p>To illustrate, here&#39;s an example output from part 3 of the Toy plant tutorial, zeroing in on a variable at the &quot;Root&quot; scale: <a href="../multiscale_example_3/#Fixing-bugs-in-the-plant-simulation">Fixing bugs in the plant simulation</a>:</p><pre><code class="language-julia hljs">julia&gt; outs

Dict{String, Dict{Symbol, Vector}} with 5 entries:
  &quot;Internode&quot; =&gt; Dict(:carbon_root_creation_consumed=&gt;[[50.0, 50.0], [50.0, 50.0], [50.0, 50.0], [50.0, 50.0], [50.0, …
  &quot;Root&quot;      =&gt; Dict(:carbon_root_creation_consumed=&gt;[[50.0, 50.0], [50.0, 50.0, 50.0], [50.0, 50.0, 50.0, 50.0], [50…
  &quot;Scene&quot;     =&gt; Dict(:TT_cu=&gt;[[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]  …  [2099.61], [20…
  &quot;Plant&quot;     =&gt; Dict(:carbon_root_creation_consumed=&gt;[[50.0], [50.0], [50.0], [50.0], [50.0], [50.0], [50.0], [50.0],…
  &quot;Leaf&quot;      =&gt; Dict(:node=&gt;Vector{Node{NodeMTG, Dict{Symbol, Any}}}[[+ 4: Leaf…

julia&gt; outs[&quot;Root&quot;]
Dict{Symbol, Vector} with 4 entries:
  :carbon_root_creation_consumed =&gt; [[50.0, 50.0], [50.0, 50.0, 50.0], [50.0, 50.0, 50.0, 50.0], [50.0, 50.0, 50.0, 50…
  :node                          =&gt; Vector{Node{NodeMTG, Dict{Symbol, Any}}}[[+ 9: Root…
  :water_absorbed                =&gt; [[0.5, 0.0], [1.0, 1.0, 0.0], [0.0, 0.0, 0.0, 0.0], [1.1, 1.1, 1.1, 1.1, 0.0], [0.…
  :root_water_assimilation       =&gt; [[1.0, 1.0], [1.0, 1.0, 1.0], [1.0, 1.0, 1.0, 1.0], [1.0, 1.0, 1.0, 1.0, 1.0], [1.…

julia&gt; outs[&quot;Root&quot;][:carbon_root_creation_consumed]
365-element Vector{Vector{Float64}}:
 [50.0, 50.0] # timestep 1: two root nodes
 [50.0, 50.0, 50.0]
 [50.0, 50.0, 50.0, 50.0]
 [50.0, 50.0, 50.0, 50.0, 50.0]
 [50.0, 50.0, 50.0, 50.0, 50.0, 50.0]
 [50.0, 50.0, 50.0, 50.0, 50.0, 50.0, 50.0] # timestep 6: 7 root nodes
 ⋮</code></pre><p>As more roots get added in this simulation, the vectors expand to list the values of all the nodes for every variable for every timestep.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Currently, the <code>:node</code> entry only shallow copies nodes. The <code>:node</code> values at each scale for every timestep actually reflect the final state of the node, meaning attribute values may not correspond to the value at that timestep. You may need to output these values via a dedicated model to keep track of them properly. Also note that there currently is no way of removing nodes. Nodes corresponding to organs considered to be pruned/dead/aborted are still present in the output data structure.</p></div></div><p>Multi-scale simulations, especially for plants which have thousands of leaves, internodes, root branches, buds and fruits, may compute huge amounts of data. Just like in single-scale simulations, it is possible to keep only variables whose values you want to track for every timestep, and filter the rest out, using the <code>tracked_outputs</code> keyword argument for the <code>run!</code> function. </p><p>Those tracked variables also need to be indexed by scale to avoid ambiguity: </p><pre><code class="language-julia hljs">outs = Dict(
    &quot;Scene&quot; =&gt; (:TT, :TT_cu,),
    &quot;Plant&quot; =&gt; (:aPPFD, :LAI),
    &quot;Leaf&quot; =&gt; (:carbon_assimilation, :carbon_demand, :carbon_allocation, :TT),
    &quot;Internode&quot; =&gt; (:carbon_allocation,),
    &quot;Soil&quot; =&gt; (:soil_water_content,),
)</code></pre><h2 id="Coupling-and-multi-scale-hard-dependencies"><a class="docs-heading-anchor" href="#Coupling-and-multi-scale-hard-dependencies">Coupling and multi-scale hard dependencies</a><a id="Coupling-and-multi-scale-hard-dependencies-1"></a><a class="docs-heading-anchor-permalink" href="#Coupling-and-multi-scale-hard-dependencies" title="Permalink"></a></h2><p>Multi-scale brings new types of coupling: mappings are part of the approach used to handle variables used by models at different scales. A model can also have a hard dependency on another model that operates at another scale. This multi-scale-specific complexity is discussed in <a href="../multiscale_coupling/#Handling-dependencies-in-a-multiscale-context">Handling dependencies in a multiscale context</a></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../working_with_data/floating_point_accumulation_error/">« Floating-point considerations</a><a class="docs-footer-nextpage" href="../single_to_multiscale/">Converting a simulation to multi-scale »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Wednesday 12 March 2025 10:08">Wednesday 12 March 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
